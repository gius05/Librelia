@{
    Layout = null; // Evitiamo ereditarietà da altri layout
    
    if (TempData["Notification"] is Dictionary<string, string> notificationSent)
    {
      ViewData["Notification"] = notificationSent;
    }
}
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Admin Panel</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/adminLayout.css"  asp-append-version="true"/>
    <link rel="icon" href="~/image/books.png"/>
  </head>
<body>
<div class="wrapper d-flex">
  <!-- Sidebar -->
  <nav id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <h3>Admin Panel</h3>
    </div>

    <ul class="list-unstyled components">
      <li class="@( ViewData["ActivePage"] == "Home" ? "active" : "")">
        <a asp-controller="Admin" asp-action="Index"><i class="bi bi-house"></i> Home</a>
      </li>
      <li class="@( ViewData["ActivePage"] == "Utenti" ? "active" : "")">
        <a asp-controller="Admin" asp-action="TabellaUtenti"><i class="bi bi-people"></i> Utenti</a>
      </li>
      <li class="@( ViewData["ActivePage"] == "Utenti Non Verificati" ? "active" : "")">
        <a asp-controller="Admin" asp-action="TabellaNonVerificati"><i class="bi bi-person-x"></i> Utenti Non Verificati</a>
      </li>
      <li class="@( ViewData["ActivePage"] == "Libri" ? "active" : "")">
        <a asp-controller="Admin" asp-action="TabellaLibri"><i class="bi bi-book"></i> Libri</a>
      </li>
      <li class="@( ViewData["ActivePage"] == "Prenotazioni" ? "active" : "")">
        <a asp-controller="Admin" asp-action="TabellaPrenotazioni"><i class="bi bi-calendar-check"></i> Prenotazioni</a>
      </li>
      <!--   <li class="@(ViewData["ActivePage"] == "Messaggi" ? "active" : "")">
        <a asp-controller="Admin" asp-action=""><i class="bi bi-envelope"></i> Messaggi</a>
      </li> 
      <li class="@( ViewData["ActivePage"] == "Newsletter" ? "active" : "")">
        <a asp-controller="Admin" asp-action=""><i class="bi bi-newspaper"></i> Newsletter</a>
                </li>-->
      <li>
        <a asp-controller="Home" asp-action="Index"><i class="bi bi-arrow-return-left"></i> Ritorna al sito</a>
      </li>      
    </ul>
  </nav>

  <!-- Page Content -->
  <div id="content" class="content">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <button type="button" id="sidebarCollapse" class="btn">
          <i class="bi bi-list"></i>
        </button>
      </div>
    </nav>

    <main class="container-fluid">
      @RenderBody()
    </main>
  </div>
  
  @Html.Partial("_NotificationPopup")
</div>

    <style lang="scss">
        .wrapper {
          min-height: 100vh;
        }

        .sidebar {
          width: 250px;
          background: #343a40;
          color: #fff;
          transition: all 0.3s;

          &.active {
            margin-left: -250px;
          }

          .sidebar-header {
            padding: 20px;
            background: #2c3136;
          }

          ul {
            padding: 20px 0;

            li {
              a {
                padding: 10px 20px;
                display: block;
                color: #fff;
                text-decoration: none;

                i {
                  margin-right: 10px;
                }

                &:hover {
                  background: #2c3136;
                }
              }

              &.active a {
                background: #2c3136;
              }
            }
          }
        }

        .content {
          flex: 1;
          padding: 20px;
          background: #f8f9fa;
        }

        @("@")media(max-width: 768px) {
          .sidebar {
            margin-left: -250px;

            &.active {
              margin-left: 0;
            }
          }
        }

        // Loading spinner
        .spinner-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }
    </style>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
@await RenderSectionAsync("Scripts", required: false)

<script>
      // Sidebar toggle
      document.getElementById('sidebarCollapse').addEventListener('click', () => {
        document.getElementById('sidebar').classList.toggle('active');
      });

      // Toast notification function
      window.showToast = (message, type = 'success') => {
        const toast = document.getElementById('toast');
        const toastBody = toast.querySelector('.toast-body');
        
        toast.classList.remove('bg-success', 'bg-danger');
        toast.classList.add(`bg-${type}`);
        toastBody.textContent = message;
        
        const bsToast = new bootstrap.Toast(toast);
        bsToast.show();
      };
    </script>
    
    
@{
  var notification = ViewData["Notification"] as Dictionary<string, string>;
  if (notification != null)
  {
    <script>
                window.showNotification('@notification["Title"]', '@notification["Message"]', '@notification["Type"]');
            </script>
  }
}
    
</body>
</html>